{"ast":null,"code":"import _classCallCheck from \"/Users/dhruvilpatel/Documents/Sponsorship/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/dhruvilpatel/Documents/Sponsorship/frontend/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/dhruvilpatel/Documents/Sponsorship/frontend/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/dhruvilpatel/Documents/Sponsorship/frontend/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/dhruvilpatel/Documents/Sponsorship/frontend/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/Users/dhruvilpatel/Documents/Sponsorship/frontend/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/Users/dhruvilpatel/Documents/Sponsorship/frontend/src/components/Magic.jsx\";\n\n/**\n * @author Shivan Modha\n * @description Component to handle all magic links\n * @version 0.0.1\n * Created 12/30/18\n */\n\n/***************************************************************IMPORTS***************************************************************/\nimport React, { Component } from \"react\";\nimport { Container, Col, Input, InputGroup, InputGroupAddon, Form, FormGroup, Button, FormText, Alert } from \"reactstrap\";\nimport { theme } from \"../Defaults\";\nimport { Icon } from \"react-fa\";\nimport { Link } from \"react-router-dom\";\nimport { RingLoader } from \"react-spinners\";\nimport LoginPage from \"./Login\";\n/***************************************************************IMPORTS***************************************************************/\n\n/*****************************************************************APP*****************************************************************/\n\n/**\n * Magic link handler component\n */\n\nvar MagicPage =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(MagicPage, _Component);\n\n  function MagicPage(props) {\n    var _this;\n\n    _classCallCheck(this, MagicPage);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(MagicPage).call(this, props));\n    _this.renderForgot = _this.renderForgot.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.renderLogin = _this.renderLogin.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(MagicPage, [{\n    key: \"componentWillMount\",\n    value: function componentWillMount() {\n      this.setState({\n        loading: false,\n        done: false,\n        errors: \"\"\n      });\n    }\n    /**\n     * Default render method, which will check to see what will render\n     */\n\n  }, {\n    key: \"render\",\n    value: function render() {\n      var mlurl = this.props.match.params.mlurl;\n\n      if (mlurl.includes(\"forgot-\")) {\n        return this.renderForgot();\n      } else {\n        return this.renderLogin();\n      }\n    }\n    /**\n     * Forgot Password\n     */\n\n  }, {\n    key: \"renderForgot\",\n    value: function renderForgot() {\n      var _this2 = this;\n\n      var innerText = \"Change your password\";\n      var innerForm = React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 51\n        },\n        __self: this\n      }, React.createElement(FormGroup, {\n        row: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 52\n        },\n        __self: this\n      }, React.createElement(InputGroup, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 53\n        },\n        __self: this\n      }, React.createElement(Input, {\n        required: true,\n        id: \"email\",\n        type: \"email\",\n        placeholder: \"email\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 54\n        },\n        __self: this\n      }))), React.createElement(FormGroup, {\n        row: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 57\n        },\n        __self: this\n      }, React.createElement(InputGroup, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 58\n        },\n        __self: this\n      }, React.createElement(Input, {\n        required: true,\n        id: \"password\",\n        type: \"password\",\n        placeholder: \"new password\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 59\n        },\n        __self: this\n      }))), React.createElement(FormGroup, {\n        row: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 62\n        },\n        __self: this\n      }, React.createElement(InputGroup, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 63\n        },\n        __self: this\n      }, React.createElement(Input, {\n        required: true,\n        type: \"password\",\n        id: \"conpassword\",\n        placeholder: \"confirm password\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 64\n        },\n        __self: this\n      }), React.createElement(InputGroupAddon, {\n        addonType: \"append\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 65\n        },\n        __self: this\n      }, React.createElement(Button, {\n        color: \"success\",\n        style: {\n          borderRadius: 0\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 66\n        },\n        __self: this\n      }, React.createElement(Icon, {\n        name: \"chevron-right\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 66\n        },\n        __self: this\n      }))))));\n\n      if (this.state.loading) {\n        innerForm = React.createElement(\"div\", {\n          style: {\n            display: \"block\",\n            width: \"100%\"\n          },\n          align: \"center\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 73\n          },\n          __self: this\n        }, React.createElement(RingLoader, {\n          color: theme.primary[0],\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 73\n          },\n          __self: this\n        }), \" \");\n        innerText = \"\";\n      }\n\n      if (this.state.done) {\n        innerForm = React.createElement(FormText, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 77\n          },\n          __self: this\n        }, React.createElement(Link, {\n          to: \"/login\",\n          style: {\n            color: \"rgba(255, 255, 255, 0.5)\"\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 77\n          },\n          __self: this\n        }, \"Login\"));\n        innerText = \"Password changed!\";\n      }\n\n      var errors = null;\n\n      if (this.state.errors !== \"\") {\n        errors = React.createElement(Alert, {\n          style: {\n            background: \"rgba(255, 0, 0, 0.25)\",\n            border: \"none\",\n            color: \"white\"\n          },\n          color: \"danger\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 82\n          },\n          __self: this\n        }, this.state.errors);\n      }\n\n      var contents = React.createElement(\"div\", {\n        style: {\n          padding: 30\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 85\n        },\n        __self: this\n      }, React.createElement(\"h1\", {\n        className: \"display-1 theme-font\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 86\n        },\n        __self: this\n      }, \"Reset\"), React.createElement(\"p\", {\n        className: \"lead\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 87\n        },\n        __self: this\n      }, innerText), React.createElement(Form, {\n        onSubmit: function onSubmit(e) {\n          e.preventDefault();\n\n          if (!_this2.state.loading) {\n            _this2.setState({\n              loading: true,\n              errors: \"\"\n            });\n\n            var email = document.getElementById(\"email\").value;\n            var password = document.getElementById(\"password\").value;\n            var conpass = document.getElementById(\"conpassword\").value;\n\n            _this2.props.profile.Reset(email, password, conpass, _this2.props.match.params.mlurl.replace(\"forgot-\", \"forgot-\"), function (msg) {\n              if (msg) {\n                _this2.setState({\n                  loading: false,\n                  errors: msg\n                });\n              } else {\n                _this2.setState({\n                  loading: false,\n                  done: true,\n                  errors: \"\"\n                });\n              }\n            });\n          }\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88\n        },\n        __self: this\n      }, errors, innerForm, React.createElement(FormText, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116\n        },\n        __self: this\n      }, React.createElement(Link, {\n        to: \"/\",\n        style: {\n          color: \"rgba(255, 255, 255, 0.5)\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116\n        },\n        __self: this\n      }, \"Return Home\"))));\n\n      if (!this.props.isMobile) {\n        return React.createElement(Container, {\n          fluid: true,\n          style: {\n            width: \"100%\",\n            minHeight: \"100vh\",\n            textAlign: \"center\",\n            backgroundColor: theme.secondary[1]\n          },\n          className: \"d-flex align-items-center\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 122\n          },\n          __self: this\n        }, React.createElement(Col, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 123\n          },\n          __self: this\n        }), React.createElement(Col, {\n          xs: 3,\n          style: {\n            display: \"block\",\n            zIndex: 3,\n            color: \"white\",\n            background: \"rgba(255, 255, 255, 0.05)\"\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 124\n          },\n          __self: this\n        }, contents), React.createElement(Col, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 127\n          },\n          __self: this\n        }));\n      } else {\n        return React.createElement(Container, {\n          fluid: true,\n          style: {\n            width: \"100%\",\n            minHeight: \"100vh\",\n            textAlign: \"center\",\n            backgroundColor: theme.secondary[1]\n          },\n          className: \"d-flex align-items-center\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 132\n          },\n          __self: this\n        }, React.createElement(Col, {\n          xs: 12,\n          style: {\n            display: \"block\",\n            zIndex: 3,\n            color: \"white\",\n            background: \"rgba(255, 255, 255, 0.05)\"\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 133\n          },\n          __self: this\n        }, contents));\n      }\n    }\n    /**\n     * Render login component\n     */\n\n  }, {\n    key: \"renderLogin\",\n    value: function renderLogin() {\n      return React.createElement(LoginPage, Object.assign({}, this.props, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 144\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return MagicPage;\n}(Component);\n/*****************************************************************APP*****************************************************************/\n\n/***************************************************************EXPORTS***************************************************************/\n\n\nexport default MagicPage;\n/***************************************************************EXPORTS***************************************************************/","map":{"version":3,"sources":["/Users/dhruvilpatel/Documents/Sponsorship/frontend/src/components/Magic.jsx"],"names":["React","Component","Container","Col","Input","InputGroup","InputGroupAddon","Form","FormGroup","Button","FormText","Alert","theme","Icon","Link","RingLoader","LoginPage","MagicPage","props","renderForgot","bind","renderLogin","setState","loading","done","errors","mlurl","match","params","includes","innerText","innerForm","borderRadius","state","display","width","primary","color","background","border","contents","padding","e","preventDefault","email","document","getElementById","value","password","conpass","profile","Reset","replace","msg","isMobile","minHeight","textAlign","backgroundColor","secondary","zIndex"],"mappings":"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","sourcesContent":["/**\n * @author Shivan Modha\n * @description Component to handle all magic links\n * @version 0.0.1\n * Created 12/30/18\n */\n/***************************************************************IMPORTS***************************************************************/\nimport React, { Component } from \"react\";\nimport { Container, Col, Input, InputGroup, InputGroupAddon, Form, FormGroup, Button, FormText, Alert } from \"reactstrap\";\nimport { theme } from \"../Defaults\";\nimport { Icon } from \"react-fa\";\nimport { Link } from \"react-router-dom\";\nimport { RingLoader } from \"react-spinners\";\nimport LoginPage from \"./Login\";\n/***************************************************************IMPORTS***************************************************************/\n\n/*****************************************************************APP*****************************************************************/\n/**\n * Magic link handler component\n */\nclass MagicPage extends Component {\n    constructor(props) {\n        super(props);\n        this.renderForgot = this.renderForgot.bind(this);\n        this.renderLogin = this.renderLogin.bind(this);\n    }\n    componentWillMount() {\n        this.setState({\n            loading: false,\n            done: false,\n            errors: \"\"\n        });\n    }\n    /**\n     * Default render method, which will check to see what will render\n     */\n    render() {\n        let mlurl = this.props.match.params.mlurl;\n        if (mlurl.includes(\"forgot-\")) {\n            return this.renderForgot();\n        } else {\n            return this.renderLogin();\n        }\n    }\n    /**\n     * Forgot Password\n     */\n    renderForgot() {\n        let innerText = \"Change your password\";\n        let innerForm = (\n            <div>\n                <FormGroup row>\n                    <InputGroup>\n                        <Input required id=\"email\" type=\"email\" placeholder=\"email\" />\n                    </InputGroup>\n                </FormGroup>\n                <FormGroup row>\n                    <InputGroup>\n                        <Input required id=\"password\" type=\"password\" placeholder=\"new password\" />\n                    </InputGroup>\n                </FormGroup>\n                <FormGroup row>\n                    <InputGroup>\n                        <Input required type=\"password\" id=\"conpassword\" placeholder=\"confirm password\" />\n                        <InputGroupAddon addonType=\"append\">\n                            <Button color=\"success\" style={{ borderRadius: 0 }}><Icon name=\"chevron-right\" /></Button>\n                        </InputGroupAddon>\n                    </InputGroup>\n                </FormGroup>\n            </div>\n        );\n        if (this.state.loading) {\n            innerForm = (<div style={{ display: \"block\", width: \"100%\" }} align=\"center\"><RingLoader color={theme.primary[0]} /> </div>);\n            innerText = \"\";\n        }\n        if (this.state.done) {\n            innerForm = <FormText><Link to=\"/login\" style={{ color: \"rgba(255, 255, 255, 0.5)\" }}>Login</Link></FormText>;\n            innerText = \"Password changed!\";\n        }\n        let errors = null;\n        if (this.state.errors !== \"\") {\n            errors = (<Alert style={{ background: \"rgba(255, 0, 0, 0.25)\", border: \"none\", color: \"white\" }} color=\"danger\">{this.state.errors}</Alert>)\n        }\n        let contents = (\n            <div style={{ padding: 30 }}>\n                <h1 className=\"display-1 theme-font\">Reset</h1>\n                <p className=\"lead\">{innerText}</p>\n                <Form onSubmit={(e) => {\n                    e.preventDefault();\n                    if (!this.state.loading) {\n                        this.setState({\n                            loading: true,\n                            errors: \"\"\n                        });\n                        let email = document.getElementById(\"email\").value;\n                        let password = document.getElementById(\"password\").value;\n                        let conpass = document.getElementById(\"conpassword\").value;\n                        this.props.profile.Reset(email, password, conpass, this.props.match.params.mlurl.replace(\"forgot-\", \"forgot-\"), (msg) => {\n                            if (msg) {\n                                this.setState({\n                                    loading: false,\n                                    errors: msg\n                                });\n                            } else {\n                                this.setState({\n                                    loading: false,\n                                    done: true,\n                                    errors: \"\"\n                                });\n                            }\n                        });\n                    }\n                }}>\n                    {errors}\n                    {innerForm}\n                    <FormText><Link to=\"/\" style={{ color: \"rgba(255, 255, 255, 0.5)\" }}>Return Home</Link></FormText>\n                </Form>\n            </div>\n        );\n        if (!this.props.isMobile) {\n            return (\n                <Container fluid style={{ width: \"100%\", minHeight: \"100vh\", textAlign: \"center\", backgroundColor: theme.secondary[1] }} className=\"d-flex align-items-center\">\n                    <Col />\n                    <Col xs={3} style={{ display: \"block\", zIndex: 3, color: \"white\", background: \"rgba(255, 255, 255, 0.05)\" }}>\n                        {contents}\n                    </Col>\n                    <Col />\n                </Container>\n            );\n        } else {\n            return (\n                <Container fluid style={{ width: \"100%\", minHeight: \"100vh\", textAlign: \"center\", backgroundColor: theme.secondary[1] }} className=\"d-flex align-items-center\">\n                    <Col xs={12} style={{ display: \"block\", zIndex: 3, color: \"white\", background: \"rgba(255, 255, 255, 0.05)\" }}>\n                        {contents}\n                    </Col>\n                </Container>\n            );\n        }\n    }\n    /**\n     * Render login component\n     */\n    renderLogin() {\n        return <LoginPage {...this.props} />\n    }\n}\n/*****************************************************************APP*****************************************************************/\n\n/***************************************************************EXPORTS***************************************************************/\nexport default MagicPage;\n/***************************************************************EXPORTS***************************************************************/"]},"metadata":{},"sourceType":"module"}